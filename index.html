<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>AI Chat</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #000;
  color: #fff;
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}
.container {
  width: 90%;
  max-width: 700px;
  height: 90vh;
  display: flex;
  flex-direction: column;
  background: #111;
}
#chat {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.message {
  padding: 5px;
  max-width: 80%;
  word-wrap: break-word;
}
.user {
  background: #fff;
  color: #000;
  align-self: flex-end;
  text-align: right;
}
.ai {
  background: #888;
  color: #000;
  align-self: flex-start;
  text-align: left;
}
.input-area {
  display: flex;
  margin-top: 5px;
}
input {
  flex: 1;
  padding: 5px;
  border: none;
  background: #222;
  color: #fff;
}
button {
  width: 80px;
  padding: 5px;
  border: none;
  background: #fff;
  color: #000;
  cursor: pointer;
}
button:hover {
  background: #ccc;
}
</style>
</head>
<body>

<div class="container">
  <div id="chat"></div>
  <div class="input-area">
    <input id="query" placeholder="Type your message..." />
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
const chat = document.getElementById('chat');

async function sendMessage() {
  const input = document.getElementById('query');
  const userMessage = input.value.trim();
  if(!userMessage) return;

  appendMessage(userMessage, 'user');
  input.value = '';

  try {
    const res = await fetch("https://morning-mud-34ab.joelrobinson-fit.workers.dev/", { // replace with your Worker URL
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ query: userMessage })
    });
    const data = await res.json();
    appendMessage(data.answer, 'ai');
  } catch (err) {
    appendMessage("Error: "+err.toString(), 'ai');
  }

  chat.scrollTop = chat.scrollHeight;
}

function appendMessage(text, type) {
  const div = document.createElement('div');
  div.className = 'message ' + type;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
